<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="UTF-8">
<title>Dino Emoji Game</title>
<style>
  body { font-family: Arial, sans-serif; background: #f0f0f0; text-align: center; margin: 0; }
  canvas { background: #fff; display: block; margin: 20px auto; border: 2px solid #333; }
  #shop, #leaderboard, #adminPanel { margin: 10px auto; display: inline-block; text-align: left; border: 2px solid #333; padding: 10px; background: #eee; }
  button { margin: 2px; }
  input { margin: 2px; }
</style>
</head>
<body>

<h1>Dino Emoji Game ğŸ¦–</h1>
<canvas id="gameCanvas" width="800" height="400"></canvas>

<div id="shop">
  <h3>Shop</h3>
  <div id="dinoShop"></div>
  <div id="obstacleShop"></div>
</div>

<div id="leaderboard">
  <h3>Leaderboard</h3>
  JmÃ©no: <input type="text" id="playerName" placeholder="TvÅ¯j nick">
  <button onclick="setPlayerName()">UloÅ¾it</button>
  <ol id="scoresList"></ol>
</div>

<div id="adminPanel">
  <h3>Admin Panel</h3>
  Heslo: <input type="password" id="adminPass">
  <button onclick="unlockAdmin()">OtevÅ™Ã­t</button>
  <div id="adminControls" style="display:none;">
    <button onclick="speedUp()">Zrychlit hru</button>
    <button onclick="resetScores()">Reset skÃ³re</button>
  </div>
</div>

<script>
// ------------------- HRA -------------------
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');

let player = {
    x: 50,
    y: 350,
    vy: 0,
    width: 50,
    height: 50,
    emoji: 'ğŸ¦–',
    grounded: true
};

let obstacles = [];
let obstacleEmojis = ['ğŸŒµ','ğŸ¾','ğŸª¨','ğŸª'];
let dinoEmojis = ['ğŸ¦–','ğŸ¦•','ğŸ‰','ğŸ¦','ğŸ¦–ğŸ¦–','ğŸ¢','ğŸ²','ğŸ¦€','ğŸ¸'];
let score = 0;
let gameSpeed = 5;
let gameInterval;

// ------------------- LOCKER -------------------
let locker = JSON.parse(localStorage.getItem('locker')) || { dinos: [], obstacles: [] };
let playerName = localStorage.getItem('playerName') || 'Player';

// ------------------- SHOP -------------------
const dinoShopDiv = document.getElementById('dinoShop');
const obstacleShopDiv = document.getElementById('obstacleShop');

function renderShop() {
    dinoShopDiv.innerHTML = '<b>Dino Skins:</b><br>';
    dinoEmojis.forEach(e => {
        let btn = document.createElement('button');
        btn.innerText = e;
        btn.onclick = () => { player.emoji = e; if(!locker.dinos.includes(e)) locker.dinos.push(e); saveLocker(); };
        dinoShopDiv.appendChild(btn);
    });

    obstacleShopDiv.innerHTML = '<b>Obstacle Skins:</b><br>';
    obstacleEmojis.forEach(e => {
        let btn = document.createElement('button');
        btn.innerText = e;
        btn.onclick = () => { if(!locker.obstacles.includes(e)) locker.obstacles.push(e); saveLocker(); };
        obstacleShopDiv.appendChild(btn);
    });
}

function saveLocker() {
    localStorage.setItem('locker', JSON.stringify(locker));
}

// ------------------- LEADERBOARD -------------------
function setPlayerName() {
    playerName = document.getElementById('playerName').value || 'Player';
    localStorage.setItem('playerName', playerName);
    alert('JmÃ©no uloÅ¾eno: ' + playerName);
}

function updateLeaderboard() {
    let scores = JSON.parse(localStorage.getItem('scores')) || [];
    scores.push({name: playerName, score: score});
    scores.sort((a,b)=>b.score-a.score);
    localStorage.setItem('scores', JSON.stringify(scores.slice(0,10)));
    let list = document.getElementById('scoresList');
    list.innerHTML = '';
    scores.slice(0,10).forEach(s => {
        let li = document.createElement('li');
        li.innerText = s.name + ': ' + s.score;
        list.appendChild(li);
    });
}

// ------------------- ADMIN -------------------
function unlockAdmin() {
    const pass = document.getElementById('adminPass').value;
    if(pass === 'kubaxqq') {
        document.getElementById('adminControls').style.display = 'block';
        alert('Admin pÅ™Ã­stup povolen!');
    } else alert('Å patnÃ© heslo!');
}

function speedUp() { gameSpeed += 2; }
function resetScores() { localStorage.removeItem('scores'); updateLeaderboard(); }

// ------------------- HERNÃ LOGIKA -------------------
document.addEventListener('keydown', e => {
    if(e.code === 'Space' && player.grounded) {
        player.vy = -15;
        player.grounded = false;
    }
});

function spawnObstacle() {
    let emoji = locker.obstacles[Math.floor(Math.random()*locker.obstacles.length)] || 'ğŸŒµ';
    obstacles.push({x: canvas.width, y: 350, width: 50, height: 50, emoji});
}

function updateGame() {
    ctx.clearRect(0,0,canvas.width,canvas.height);

    // player
    player.vy += 0.7; // gravity
    player.y += player.vy;
    if(player.y >= 350){ player.y = 350; player.vy = 0; player.grounded = true; }
    ctx.font = '50px Arial';
    ctx.fillText(player.emoji, player.x, player.y+50);

    // obstacles
    obstacles.forEach((o, i) => {
        o.x -= gameSpeed;
        ctx.fillText(o.emoji, o.x, o.y+50);
        // kolize
        if(player.x < o.x+o.width && player.x+player.width > o.x &&
           player.y < o.y+o.height && player.y+player.height > o.y) {
            clearInterval(gameInterval);
            alert('Game Over! SkÃ³re: ' + score);
            updateLeaderboard();
            resetGame();
        }
        if(o.x + o.width < 0) obstacles.splice(i,1);
    });

    score++;
    ctx.fillText('Score: ' + score, 600, 50);
}

function resetGame() {
    score = 0;
    obstacles = [];
    gameInterval = setInterval(updateGame, 1000/60);
}

// spawn pÅ™ekÃ¡Å¾ek
setInterval(spawnObstacle, 2000);
renderShop();
resetGame();
updateLeaderboard();
</script>

</body>
</html>
